 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Future Snake Pro | Kotlin-Style JS</title>
    <style>
        :root {
            --neon-blue: #00f2ff;
            --neon-pink: #ff007b;
            --bg-dark: #050510;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--neon-blue);
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--neon-blue);
        }

        #game-container {
            position: relative;
            padding: 10px;
            border: 2px solid var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.3);
            border-radius: 8px;
        }

        canvas {
            display: block;
            background: #000;
        }

        .stats-panel {
            display: flex;
            justify-content: space-between;
            width: 400px;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .glow-text {
            text-shadow: 0 0 8px var(--neon-blue);
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>FUTURE SNAKE <small style="font-size: 0.5em;">v2.0</small></h1>
    </div>

    <div id="game-container">
        <canvas id="snakeGame" width="400" height="400"></canvas>
    </div>

    <div class="stats-panel">
        <div class="glow-text">SCORE: <span id="score">0</span></div>
        <div class="glow-text">LEVEL: <span id="level">1</span></div>
    </div>

    <script>
        // Game Logic in Clean Class-based Structure (Kotlin-style)
        class GameEngine {
            constructor() {
                this.canvas = document.getElementById("snakeGame");
                this.ctx = this.canvas.getContext("2d");
                this.gridSize = 20;
                this.tileCount = 20;
                
                this.reset();
                this.setupControls();
            }

            reset() {
                this.snake = [{x: 10, y: 10}, {x: 9, y: 10}, {x: 8, y: 10}];
                this.food = {x: 5, y: 5};
                this.dx = 1;
                this.dy = 0;
                this.score = 0;
                this.level = 1;
                this.speed = 120; // Initial speed in ms
                this.isPaused = false;
                
                this.updateUI();
                this.spawnFood();
            }

            setupControls() {
                document.addEventListener("keydown", (e) => {
                    const keys = { 37: [-1, 0], 38: [0, -1], 39: [1, 0], 40: [0, 1] };
                    if (keys[e.keyCode]) {
                        const [newDx, newDy] = keys[e.keyCode];
                        // Prevent 180-degree turns
                        if (newDx !== -this.dx && newDy !== -this.dy) {
                            this.dx = newDx;
                            this.dy = newDy;
                        }
                    }
                });
            }

            spawnFood() {
                this.food = {
                    x: Math.floor(Math.random() * this.tileCount),
                    y: Math.floor(Math.random() * this.tileCount)
                };
            }

            draw() {
                // 1. Clear Canvas with slight fade for motion blur
                this.ctx.fillStyle = "rgba(0, 0, 0, 0.8)";
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // 2. Draw Food (Neon Pulse)
                this.ctx.shadowBlur = 15;
                this.ctx.shadowColor = "#ff007b";
                this.ctx.fillStyle = "#ff007b";
                this.ctx.beginPath();
                this.ctx.arc(this.food.x * this.gridSize + 10, this.food.y * this.gridSize + 10, 8, 0, Math.PI * 2);
                this.ctx.fill();

                // 3. Draw Snake
                this.snake.forEach((part, index) => {
                    const isHead = index === 0;
                    this.ctx.shadowBlur = isHead ? 20 : 0;
                    this.ctx.shadowColor = "#00f2ff";
                    this.ctx.fillStyle = isHead ? "#00f2ff" : "rgba(0, 242, 255, 0.5)";
                    
                    this.ctx.fillRect(
                        part.x * this.gridSize + 1, 
                        part.y * this.gridSize + 1, 
                        this.gridSize - 2, 
                        this.gridSize - 2
                    );
                });
                this.ctx.shadowBlur = 0;
            }

            update() {
                const head = { x: this.snake[0].x + this.dx, y: this.snake[0].y + this.dy };

                // Collision Detection (Walls)
                if (head.x < 0 || head.x >= this.tileCount || head.y < 0 || head.y >= this.tileCount) {
                    return this.gameOver();
                }

                // Collision Detection (Self)
                if (this.snake.some(p => p.x === head.x && p.y === head.y)) {
                    return this.gameOver();
                }

                this.snake.unshift(head);

                // Check Food
                if (head.x === this.food.x && head.y === this.food.y) {
                    this.score += 10;
                    if (this.score % 50 === 0) {
                        this.level++;
                        this.speed = Math.max(50, this.speed - 10); // Faster!
                    }
                    this.updateUI();
                    this.spawnFood();
                } else {
                    this.snake.pop();
                }
            }

            updateUI() {
                document.getElementById("score").innerText = this.score;
                document.getElementById("level").innerText = this.level;
            }

            gameOver() {
                alert(`MISSION FAILED!\nFinal Score: ${this.score}\nLevel Reached: ${this.level}`);
                this.reset();
            }

            run() {
                this.update();
                this.draw();
                setTimeout(() => this.run(), this.speed);
            }
        }

        // Initialize Game
        const game = new GameEngine();
        game.run();
    </script>
</body>
</html>
